---
title: Science With Paraview and Blender
layout: single
author_profile: true
read_time: true
share: true
date: '2019-06-16 14:30:00 -0800'
categories: coding
toc: true
---

I've been playing around with [blender][blender] again.

I'd been thinking about submitting something for this year's [John D. Hunter Excellence in Plotting Contest`][jdh], but as it turned out I went away for about a week leading up to the final submission date, and didn't have anything prepared by the last day. I struggled for a few hours on that last day to come up with something worth submitting, but nothing I tried seemed as visually impressive as I originally hoped it would be. Ultimately I just didn't have enough time to submit an entry, because I had made plans to travel with my parents on the final submission day, and I wasn't about to put off going on an awesome trip (Helsinki!) to make figures. But after returning from my trip, I wanted to complete my original goal: use Blender to make a visualization of something related to magnetism.

Back to Blender. Previously I made a [post][post] about how you can import scientific data into [Paraview][paraview], manipulate it, and export the result as a PLY file, which can then be imported into Blender for fancy visualization. That method is, for me, still the easiest way to produce great still images. There are however a few important shortcomings to consider before using this method:

1. Vertex colors just don't work with Eevee, the incredible new render engine introduced in Blender 2.8. This means you're restricted to using the Cycles engine, which is more accurate than Eevee but much, *much* slower.
2. Animations are almost impossible to make, in part because this method requires a lot of intermediate files (raw data -> VTK -> PLY -> Blender save) which take up a ton of disk space. Since you need a PLY file for each frame of an animation, the amount of storage you need for any sizeable dataset quickly grows beyond a reasonable size.
3. Because the PLY files generated by Paraview export *all* of the objects in view as a single mesh, they aren't really *separate* in any real sense in Blender. This means you can't do cool stuff like keyframing the properties of the objects you imported. They aren't really separate objects at all; the imported PLY is just a single object with a single mesh.[^1]


[^1]: While you can actually split this single mesh into a bunch of separate objects in Blender, this still doesn't really solve the problem. For example, suppose I have some object in Paraview which moves as a function of time, and I want to make a movie of it in Blender. I can try to export my data in Paraview as a set of PLY files (`frame1.ply, frame2.ply, frame3.ply, ...`), like images from a flip-book. But there is still no way to tell Blender that the object I import from `frame1.ply` is the same object as in `frame2.ply`, shown at a different time. As far as Blender is concerned these are compeletely different objects, so Blender's most powerful animation features - specifically, keyframing the motion of objects - just won't work here.

[blender]: www.blender.org
[jdh]: https://matplotlib.org/
[post]: {{ site.url }}{{ site.baseurl }}/coding/paraview-blender-workflow/
[paraview]: https://www.paraview.org/